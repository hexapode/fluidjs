<html>
  <head>
    <script type="text/javascript" src='./fluid.js'></script>
  </head>
  <body>
    <h1>Simple example</h1>
    <canvas width=800 height=600 id='canvas'></canvas>

    <script>

      var PARTICLES = [];

      for (var i = 0; i < 1000; ++i) {
        PARTICLES.push({
          x : Math.random() * 800 | 0,
          y : Math.random() * 600 | 0
        })
      }

      var fluid = new Fluid({
        // viewport resolution
        viewport : {
          width : 800,
          height : 600
        },
        // simulation resolution (impact performances!)
        simulation : {
          width : 80,
          height : 60
        },
        // particule present in begin of simulation(optional)
        particles : PARTICLES
      });

      var canvas = document.getElementById('canvas');
      var ctx = canvas.getContext('2d');

      function run() {
        // should use requestAnimFrame!!
        setTimeout(run, 16)

        // update fluid engine :
        fluid.update();


        ctx.clearRect(0,0,800,600);
        ctx.fillStyle = '#000';
        ctx.strokeStyle = '#000';
        
        fluid.gizmo(ctx);
        /*
        for (var i = 0; i < PARTICLES.length; ++i) {
          ctx.fillRect(PARTICLES[i].x -1, PARTICLES[i].y - 1, 3,3);
        }*/
      }

      run();


    </script>
  </body>

</html>